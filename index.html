
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Pole Inspector</title>
  <meta name="theme-color" content="#0b5ed7" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Pole Inspector</h1>
  </header>

  <main>
    <section id="scan-section">
      <div class="card">
        <h2>Serial Number</h2>
        <div class="controls">
          <input id="f-id" class="code-input" placeholder="e.g., NS-7003-001" />
          <button id="btn-paste">Paste</button>
          <button id="btn-clear">Clear</button>
        </div>
      </div>
    </section>

    <section id="form-section">
      <div class="card">
        <h2>Record</h2>

        <!-- General -->
        <div class="subcard">
          <h3>General</h3>
          <div class="grid">
            <label>Species
              <select id="f-species">
                <option value="">— Select —</option>
                <option value="SYP">SYP</option>
                <option value="DF">DF</option>
                <option value="RP">RP</option>
                <option value="WRC">WRC</option>
                <option value="Unknown">Unknown</option>
              </select>
            </label>

            <label>Height (m)
              <input id="f-height" type="number" step="0.1" min="0" placeholder="e.g., 12.5" />
            </label>

            <label>Status
              <select id="f-status">
                <option value="">— Select —</option>
                <option value="OK">OK</option>
                <option value="Watch">Watch</option>
                <option value="Repair">Repair</option>
                <option value="Replace">Replace</option>
              </select>
            </label>

            <label>Latitude
              <input id="f-lat" inputmode="decimal" placeholder="Auto or manual" />
            </label>

            <label>Longitude
              <input id="f-lng" inputmode="decimal" placeholder="Auto or manual" />
            </label>

            <label>Accuracy (m)
              <input id="f-acc" inputmode="decimal" placeholder="Auto" />
            </label>

            <label>Updated At
              <input id="f-updated" disabled />
            </label>
          </div>
          <div class="controls">
            <button type="button" id="btn-locate">Get current location</button>
          </div>
        </div>

        <!-- Traditional Inspection -->
        <div class="subcard">
          <h3>Traditional Inspection</h3>
          <div class="grid">
            <label>Calc Equivalent Dia (%)
              <input id="f-calc-dia-pct" type="number" step="0.1" min="0" max="100" placeholder="Optional, 0–100" />
            </label>

            <label>Notes
              <textarea id="f-trad-notes" rows="3" placeholder="Optional notes for traditional inspection"></textarea>
            </label>
          </div>
          <div class="controls">
            <button type="button" class="btn-photo" data-target="traditional" data-mode="attach">Attach photo</button>
            <button type="button" class="btn-photo" data-target="traditional" data-mode="insert">Insert photo into notes</button>
            <input type="file" id="photo-file" accept="image/*" capture="environment" hidden />
          </div>
          <div id="trad-photo-grid" class="photo-grid"></div>
        </div>

        <!-- NDT Testing -->
        <div class="subcard">
          <h3>NDT Testing</h3>

          <div class="ndt-block">
            <h4>Acoustic</h4>
            <div class="grid">
              <label>Notes
                <textarea id="f-acoustic-notes" rows="3" placeholder="Notes for acoustic data"></textarea>
              </label>
            </div>
            <div class="controls">
              <button type="button" class="btn-photo" data-target="acoustic" data-mode="attach">Attach photo</button>
              <button type="button" class="btn-photo" data-target="acoustic" data-mode="insert">Insert photo into notes</button>
            </div>
            <div id="acoustic-photo-grid" class="photo-grid"></div>
          </div>

          <div class="ndt-block">
            <h4>Resistance Drill</h4>
            <div class="grid">
              <label>Notes
                <textarea id="f-resist-notes" rows="3" placeholder="Notes for resistance drill"></textarea>
              </label>
            </div>
            <div class="controls">
              <button type="button" class="btn-photo" data-target="resistance" data-mode="attach">Attach photo</button>
              <button type="button" class="btn-photo" data-target="resistance" data-mode="insert">Insert photo into notes</button>
            </div>
            <div id="resist-photo-grid" class="photo-grid"></div>
          </div>

          <div class="ndt-block">
            <h4>XRF</h4>
            <div class="grid">
              <label>Target chemical fingerprint
                <select id="f-xrf-fingerprint">
                  <option value="">— Select —</option>
                  <option value="PCP">PCP</option>
                  <option value="CCA">CCA</option>
                  <option value="Other">Other</option>
                </select>
              </label>
              <label>Concentration
                <input id="f-xrf-conc" placeholder="e.g., mg/kg or %" />
              </label>
              <label>Notes
                <textarea id="f-xrf-notes" rows="3" placeholder="XRF notes"></textarea>
              </label>
            </div>
          </div>
        </div>

        <div class="controls">
          <button type="submit" id="btn-save">Save</button>
          <button type="button" id="btn-new">New</button>
          <button type="button" id="btn-delete" class="danger">Delete</button>
        </div>

      </div>
    </section>

    <section id="list-section">
      <div class="card">
        <h2>Data</h2>
        <div class="controls">
          <input id="search" placeholder="Filter by serial (fuzzy match)" />
          <button id="btn-export">Export CSV</button>
          <label class="file-label">
            Import CSV
            <input type="file" id="import-file" accept=".csv,text/csv" hidden />
          </label>
        </div>
        <div class="table-wrap">
          <table id="data-table">
            <thead>
              <tr>
                <th>Serial</th><th>Species</th><th>Height(m)</th><th>Status</th><th>Calc Dia (%)</th><th>Lat</th><th>Lng</th><th>Updated</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <small>Data is stored locally (IndexedDB).</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
